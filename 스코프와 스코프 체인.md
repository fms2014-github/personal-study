# 스코프와 스코프 체인

# 스코프란?

스코프(Scope)의 정의는 식별자 접근 규칙에 따른 유효범위로 일반적으로 하위 스코프에서 상위 스코프의 접근은 가능하지만 상위 스코프에서 하위 스코프로는 접근이 어렵다.

# 스코프의 구분

스코프는 크게 전역 스코프와 지역 스코프 2개로 나누어져 있다.

- 전역 스코프
    - 코드 어디서든지 참조 가능
- 지역 스코프
    - 함수 코드 블럭이 만든 스코프로 함수 자신과 하위 함수에서만 참조가 가능하다.

자바스크립트는 ES6을 기준으로 3가지의 스코프 특성을 가지고 있다.

- 블록 레벨 스코프
    - 대부분의 프로그래밍 언어가 가지는 스코프 특성으로 코드 블록 내부와 코드 블럭 내부에 있는 하위 코드 블럭에서만 유효한 접근이 가능하다.
    - let, const 키워드로 변수를 선언하면 블록 레벨 스코프의 변수를 선언할 수 있다.
- 함수 레벨 스코프
    - 함수 코드 블럭 내에서만 참조가 가능하다.
    - var 키워드로 변수를 선언하면 함수 레벨 스코프로 동작한다.
    
    ```jsx
    var x = 1;
    if(true){
        var x = 2; // function의 코드블럭이 아니라서 함수 레벨 스코프가 아니다
    }
    
    function foo(){
        var x = 4; // function의 코드블럭이기 때문에 함수 레벨 스코프가 적용되어 지역변수 취급을 받는다.
    }
    
    console.log(x); // 2
    ```
    
- 렉시컬 스코프
    - 상위 스코프를 결정하는 방법이다.
    - 함수를 어디서 선언했는지에 따라 상위 스코프가 결정된다.
    
    ```jsx
    var x = 1;
    
    function foo() {
      var x = 10;
      bar(); // bar 함수가 전역에 선언되어 있기 때문에 bar의 상위 스코프는 전역 스코프가 된다.
    }
    
    function bar() {
      console.log(x); // bar함수의 상위 스코프가 전역 스코프로 결졍됐기 때문에 x는 1이 된다.
    }
    
    foo(); // 1
    bar(); // 1
    ```
    

# 스코프 체인이란?

자바스크립트 엔진은 호출된 함수에서 찾아야 하는 식별자가 자기 스코프 내에 존재하지 않을 때 렉시컬 스코프로 결정 상위 스코프를 참조하여 식별자를 재 탐색을 한다. 이런식으로 연결되어 있는 스코프의 구조를 탐색해 나가는 현상을 스코프 체인이라고 한다.

이런 방식 때문에 같은 이름의 변수를 선언했을 때 지역변수로 취급되는 변수 값을 먼저 읽는게 가능한 것이다.

스코프 체인은 console.dir 메서드를 통해 나오는 [[Scope]]슬롯에서 확인할 수 있다.

![다운로드.png](%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20%E1%84%8E%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AB%20d40ca4efddc54a9ab34877150df4ac31/%25EB%258B%25A4%25EC%259A%25B4%25EB%25A1%259C%25EB%2593%259C.png)